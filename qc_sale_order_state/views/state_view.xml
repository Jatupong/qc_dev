<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="view_sale_order_form_qc_sale_state_order" model="ir.ui.view">
        <field name="name">sale.order.form.qc.sale.state.order</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">

<!--            <xpath expr="//field[@name='state']" position="attributes">-->
<!--                <attribute name="invisible">1</attribute>-->
<!--            </xpath>-->
<!--            <xpath expr="//button[7]" position="attributes">-->
<!--                <attribute name="invisible">1</attribute>-->
<!--            </xpath>-->
<!--            <xpath expr="//button[8]" position="attributes">-->
<!--                <attribute name="invisible">1</attribute>-->
<!--            </xpath>-->

            <xpath expr="//button[@name='action_cancel']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('state', 'in', ['draft','cancel']), ('id', '=', False)]}</attribute>
            </xpath>

            <xpath expr="//button[@name='action_draft']" position="replace">
                <button name="action_draft"  type="object" string="Set to Quotation" attrs="{'invisible': [('state', 'not in', ['cancel'])]}"/>
            </xpath>

            <xpath expr="//header" position="inside">
                <button name="action_pre_production" string="Pre-production order" type="object" class="btn-primary" attrs="{'invisible': [('state', 'not in', ['draft'])]}"/>

                <button name="action_check_delivery" string="Check Delivery" type="object" class="btn-primary" attrs="{'invisible': [('state', 'not in', ['sent'])]}"/>
                <button name="action_delivery_confirm" string="Delivery Confirm" type="object" class="btn-primary" attrs="{'invisible': [('state', 'not in', ['check_delivery'])]}"/>
                <button name="action_pp_confirm" string="PP Confirm" type="object" class="btn-primary" attrs="{'invisible': [('state', 'not in', ['delivery_confirm'])]}"/>


                <button name="action_confirm_sale" string="Sales Order" type="object" class="btn-primary" attrs="{'invisible': [('state', 'not in', ['pp_confirm'])]}"/>
                <button name="action_production" string="Production order" type="object" class="btn-primary" attrs="{'invisible': [('state', 'not in', ['sale'])]}"/>
                <button name="action_done_sale" string="Done" type="object" class="btn-primary" attrs="{'invisible': [('state', 'not in', ['sale','production'])]}"/>
                <button name="action_do_and_mr" string="Gen MR" type="object" class="btn-primary" attrs="{'invisible': [('state', 'not in', ['check_delivery'])]}"/>
            </xpath>

<!--            <xpath expr="//button[@name='action_draft']" position="after">-->
<!--                <field name="state_sale_order" widget="statusbar" statusbar_visible="draft,sent,check_delivery,delivery_confirm,pp_confirm,sale,production"/>-->
<!--            </xpath>-->

            <xpath expr="//field[@name='state']" position="attributes">
                <attribute name="statusbar_visible">draft,sent,check_delivery,delivery_confirm,pp_confirm,sale,production</attribute>
            </xpath>

            <div name="button_box" position="inside">
                <button type="object" name="action_view_mr_order" class="oe_stat_button" icon="/qc_sale_order_state/views/kitty.png" groups="base.group_user" >
                   <field name="mr_order_count_one" widget="statinfo" string="Mr"/>

                </button>
            </div>



        </field>
    </record>


<!--        <record id="view_sale_order_form_qc_sale_state_order_tree" model="ir.ui.view">-->
<!--            <field name="name">view.sale.order.form.qc.sale.state.order.tree</field>-->
<!--            <field name="model">sale.order</field>-->
<!--            <field name="inherit_id" ref="sale.view_quotation_tree"/>-->
<!--            <field name="arch" type="xml">-->

<!--                <xpath expr="//tree" position="attributes">-->
<!--                <attribute name="decoration-info">state_sale_order in ['draft', 'sent']</attribute>-->
<!--                <attribute name="decoration-muted">state_sale_order in ['cancel']</attribute>-->
<!--            </xpath>-->

<!--                <xpath expr="//field[@name='state']" position="attributes">-->
<!--                <attribute name="invisible">1</attribute>-->
<!--            </xpath>-->

<!--                <xpath expr="//field[@name='amount_total']" position="after">-->
<!--                    <field name="state_sale_order"/>-->


<!--                </xpath>-->

<!--            </field>-->
<!--        </record>-->





</odoo>