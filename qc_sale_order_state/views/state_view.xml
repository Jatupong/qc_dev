<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="view_sale_order_form_qc_sale_state_order" model="ir.ui.view">
        <field name="name">sale.order.form.qc.sale.state.order</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">

            <xpath expr="//field[@name='state']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//button[7]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//button[8]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//button[@name='action_cancel']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('state_sale_order', 'not in', ['sent','sale','done']), ('id', '=', False)]}</attribute>
            </xpath>

            <xpath expr="//button[@name='action_draft']" position="replace">
                <button name="action_draft"  type="object" string="Set to Quotation" attrs="{'invisible': [('state_sale_order', 'not in', ['cancel'])]}"/>
            </xpath>

            <xpath expr="//header" position="inside">
                <button name="action_pre_production" string="Pre-production order" type="object" class="btn-primary" attrs="{'invisible': [('state_sale_order', 'not in', ['draft'])]}"/>
                <button name="action_confirm_sale" string="Sales Order" type="object" class="btn-primary" attrs="{'invisible': [('state_sale_order', 'not in', ['sent'])]}"/>
                <button name="action_production" string="Production order" type="object" class="btn-primary" attrs="{'invisible': [('state_sale_order', 'not in', ['sale'])]}"/>
                <button name="action_done_sale" string="Done" type="object" class="btn-primary" attrs="{'invisible': [('state_sale_order', 'not in', ['sale','production'])]}"/>
            </xpath>

            <xpath expr="//button[@name='action_draft']" position="after">
                <field name="state_sale_order" widget="statusbar" statusbar_visible="draft,sent,sale,production"/>
            </xpath>



        </field>
    </record>


        <record id="view_sale_order_form_qc_sale_state_order_tree" model="ir.ui.view">
            <field name="name">view.sale.order.form.qc.sale.state.order.tree</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_quotation_tree"/>
            <field name="arch" type="xml">

                <xpath expr="//tree" position="attributes">
                <attribute name="decoration-info">state_sale_order in ['draft', 'sent']</attribute>
                <attribute name="decoration-muted">state_sale_order in ['cancel']</attribute>
            </xpath>

                <xpath expr="//field[@name='state']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

                <xpath expr="//field[@name='amount_total']" position="after">
                    <field name="state_sale_order"/>


                </xpath>

            </field>
        </record>





</odoo>